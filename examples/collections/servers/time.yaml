# MCPSpec Community Collection: Time Server
# Server: @modelcontextprotocol/server-time
# Docs: https://github.com/modelcontextprotocol/servers/tree/main/src/time
# Prerequisites: None

schemaVersion: "1.0"
name: Time Server Tests
description: Tests for the official MCP time and timezone server

server:
  transport: stdio
  command: npx
  args: ["-y", "@modelcontextprotocol/server-time"]

tests:
  # --- Get current time ---

  - id: time-utc
    name: Get current time in UTC
    tags: [smoke]
    call: get_current_time
    with:
      timezone: "UTC"
    assertions:
      - type: schema
      - type: exists
        path: $.content

  - id: time-new-york
    name: Get current time in New York
    tags: [smoke]
    call: get_current_time
    with:
      timezone: "America/New_York"
    assertions:
      - type: schema
      - type: exists
        path: $.content

  - id: time-tokyo
    name: Get current time in Tokyo
    tags: [smoke]
    call: get_current_time
    with:
      timezone: "Asia/Tokyo"
    assertions:
      - type: schema
      - type: exists
        path: $.content

  - id: time-london
    name: Get current time in London
    tags: [smoke]
    call: get_current_time
    with:
      timezone: "Europe/London"
    assertions:
      - type: schema
      - type: exists
        path: $.content

  # --- Convert time ---

  - id: convert-ny-to-london
    name: Convert time from New York to London
    tags: [conversion]
    call: convert_time
    with:
      source_timezone: "America/New_York"
      time: "14:30"
      target_timezone: "Europe/London"
    assertions:
      - type: schema
      - type: exists
        path: $.content

  - id: convert-tokyo-to-utc
    name: Convert time from Tokyo to UTC
    tags: [conversion]
    call: convert_time
    with:
      source_timezone: "Asia/Tokyo"
      time: "09:00"
      target_timezone: "UTC"
    assertions:
      - type: schema
      - type: exists
        path: $.content

  - id: convert-sydney-to-la
    name: Convert time from Sydney to Los Angeles
    tags: [conversion]
    call: convert_time
    with:
      source_timezone: "Australia/Sydney"
      time: "18:00"
      target_timezone: "America/Los_Angeles"
    assertions:
      - type: schema
      - type: exists
        path: $.content

  # --- Error handling ---

  - id: invalid-timezone
    name: Handle invalid timezone
    tags: [error]
    call: get_current_time
    with:
      timezone: "Invalid/Timezone"
    expectError: true

  - id: invalid-time-format
    name: Handle invalid time format in conversion
    tags: [error]
    call: convert_time
    with:
      source_timezone: "UTC"
      time: "not-a-time"
      target_timezone: "America/New_York"
    expectError: true

  # --- Performance ---

  - id: time-latency
    name: Time query responds within 2 seconds
    tags: [performance]
    call: get_current_time
    with:
      timezone: "UTC"
    assertions:
      - type: latency
        maxMs: 2000
